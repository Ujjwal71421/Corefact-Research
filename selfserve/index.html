<script>
  const params = new URLSearchParams(window.location.search);
  const status = params.get("status");
  const sid = params.get("sid");
  const country = params.get("country");
  const respId = params.get("resp_id");
  const lang = params.get("lang") || "en"; // default language

  const messageEl = document.getElementById("message");
  const codeEl = document.getElementById("code");
  const respIdEl = document.getElementById("respId");

  // Language dictionary
  const messages = {
    en: {
      completed: "✅ Survey Completed",
      disqualified: "🚫 Disqualified",
      quotaFull: "🚫 Quota Full",
      rejected: "🚫 Rejected/Flagged",
      missingParams: "❌ Missing parameters. Please check your survey URL.",
      respondent: "Respondent ID",
      rewardCode: "Reward Code"
    },
    hi: {
      completed: "✅ सर्वेक्षण पूरा हुआ",
      disqualified: "🚫 अयोग्य",
      quotaFull: "🚫 कोटा भर गया",
      rejected: "🚫 अस्वीकृत/झंडी दिखा दी गई",
      missingParams: "❌ कुछ जानकारियाँ गायब हैं। कृपया लिंक की जांच करें।",
      respondent: "प्रतिभागी आईडी",
      rewardCode: "इनाम कोड"
    },
    fr: {
      completed: "✅ Enquête terminée",
      disqualified: "🚫 Disqualifié",
      quotaFull: "🚫 Quota atteint",
      rejected: "🚫 Rejeté / Signalé",
      missingParams: "❌ Paramètres manquants. Veuillez vérifier l'URL.",
      respondent: "ID du participant",
      rewardCode: "Code de récompense"
    }
  };

  const t = messages[lang] || messages.en;

  if (!status || !sid || !country) {
    messageEl.textContent = t.missingParams;
    messageEl.classList.add("error");
    codeEl.textContent = "";
  } else {
    let message;
    switch (status) {
      case "111":
        message = t.completed;
        break;
      case "222":
        message = t.disqualified;
        break;
      case "333":
        message = t.quotaFull;
        break;
      case "444":
        message = t.rejected;
        break;
      default:
        message = "Unknown status";
    }

    messageEl.textContent = message;
    codeEl.textContent = `${t.rewardCode}: ${status} | SID: ${sid} | Country: ${country}`;

    if (respId) {
      respIdEl.textContent = `${t.respondent}: ${respId}`;
    }
  }
</script>
