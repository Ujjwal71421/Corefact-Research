<script>
  const params = new URLSearchParams(window.location.search);
  const status = params.get("status");
  const sid = params.get("sid");
  const country = params.get("country");
  const respId = params.get("resp_id");
  const lang = params.get("lang") || "en"; // default language

  const messageEl = document.getElementById("message");
  const codeEl = document.getElementById("code");
  const respIdEl = document.getElementById("respId");

  // Language dictionary
  const messages = {
    en: {
      completed: "âœ… Survey Completed",
      disqualified: "ğŸš« Disqualified",
      quotaFull: "ğŸš« Quota Full",
      rejected: "ğŸš« Rejected/Flagged",
      missingParams: "âŒ Missing parameters. Please check your survey URL.",
      respondent: "Respondent ID",
      rewardCode: "Reward Code"
    },
    hi: {
      completed: "âœ… à¤¸à¤°à¥à¤µà¥‡à¤•à¥à¤·à¤£ à¤ªà¥‚à¤°à¤¾ à¤¹à¥à¤†",
      disqualified: "ğŸš« à¤…à¤¯à¥‹à¤—à¥à¤¯",
      quotaFull: "ğŸš« à¤•à¥‹à¤Ÿà¤¾ à¤­à¤° à¤—à¤¯à¤¾",
      rejected: "ğŸš« à¤…à¤¸à¥à¤µà¥€à¤•à¥ƒà¤¤/à¤à¤‚à¤¡à¥€ à¤¦à¤¿à¤–à¤¾ à¤¦à¥€ à¤—à¤ˆ",
      missingParams: "âŒ à¤•à¥à¤› à¤œà¤¾à¤¨à¤•à¤¾à¤°à¤¿à¤¯à¤¾à¤ à¤—à¤¾à¤¯à¤¬ à¤¹à¥ˆà¤‚à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤²à¤¿à¤‚à¤• à¤•à¥€ à¤œà¤¾à¤‚à¤š à¤•à¤°à¥‡à¤‚à¥¤",
      respondent: "à¤ªà¥à¤°à¤¤à¤¿à¤­à¤¾à¤—à¥€ à¤†à¤ˆà¤¡à¥€",
      rewardCode: "à¤‡à¤¨à¤¾à¤® à¤•à¥‹à¤¡"
    },
    fr: {
      completed: "âœ… EnquÃªte terminÃ©e",
      disqualified: "ğŸš« DisqualifiÃ©",
      quotaFull: "ğŸš« Quota atteint",
      rejected: "ğŸš« RejetÃ© / SignalÃ©",
      missingParams: "âŒ ParamÃ¨tres manquants. Veuillez vÃ©rifier l'URL.",
      respondent: "ID du participant",
      rewardCode: "Code de rÃ©compense"
    }
  };

  const t = messages[lang] || messages.en;

  if (!status || !sid || !country) {
    messageEl.textContent = t.missingParams;
    messageEl.classList.add("error");
    codeEl.textContent = "";
  } else {
    let message;
    switch (status) {
      case "111":
        message = t.completed;
        break;
      case "222":
        message = t.disqualified;
        break;
      case "333":
        message = t.quotaFull;
        break;
      case "444":
        message = t.rejected;
        break;
      default:
        message = "Unknown status";
    }

    messageEl.textContent = message;
    codeEl.textContent = `${t.rewardCode}: ${status} | SID: ${sid} | Country: ${country}`;

    if (respId) {
      respIdEl.textContent = `${t.respondent}: ${respId}`;
    }
  }
</script>
